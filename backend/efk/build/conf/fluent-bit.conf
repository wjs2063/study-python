# conf/fluent-bit.conf (핵심만)
[SERVICE]
    Flush        5
    Daemon       Off
    Parsers_File /fluent-bit/etc/parsers.conf
    Log_Level    info
    storage.path /var/lib/fluent-bit/storage

[INPUT]
    Name              tail
    Path              /var/lib/docker/containers/*/*-json.log
    Parser            docker
    Tag               docker.${name}                # 컨테이너명 태그에 넣기
    Mem_Buf_Limit     64MB
    Skip_Long_Lines   On
    storage.type      filesystem

# 라벨 필터는 못 쓰므로(병합 불가), 태그/컨테이너명으로 필터링 예시:
[FILTER]
    Name   grep
    Match  docker.*
    Regex  $tag  ^docker\.efk             # 컨테이너 이름이 efk* 인 것만

[OUTPUT]
    Name         forward
    Match        docker.*
    Host         fluentd
    Port         24224
    Retry_Limit  False
