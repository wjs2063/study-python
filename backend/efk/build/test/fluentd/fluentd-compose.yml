
networks:
  logging:
    name : logging
    driver: bridge

services:
  fluentd:
    build:
      context: .        # 위 Dockerfile 위치
      dockerfile: Dockerfile
    image: fluentd-test
    container_name: fluentd
    restart: always
    command: ["fluentd", "-c", "/fluentd/etc/fluent.conf"]
    volumes:
      - ./fluent.conf:/fluentd/etc/fluent.conf:ro   # 호스트의 conf 마운트
      - ./fluentd-buffer:/fluentd/buffer                    # 버퍼 지속화
    networks:
      - logging
    ports:
      - "24224:24224"   # 호스트로도 노출(외부/다른 노드에서 수집 시 필요)
